diff a/code/datums/helper_datums/getrev.dm b/code/datums/helper_datums/getrev.dm	(rejected hunks)
@@ -71,9 +71,9 @@
 		return ""
 	. = header ? "The following pull requests are currently test merged:<br>" : ""
 	for(var/line in testmerge)
-		var/cm = testmerge[line]["commit"]
 		var/details 
 		if(world.RunningService())
+			var/cm = testmerge[line]["commit"]
 			details = ": '" + html_encode(testmerge[line]["title"]) + "' by " + html_encode(testmerge[line]["author"]) + " at commit " + html_encode(copytext(cm, 1, min(length(cm), 7)))
 		else if(has_pr_details)	//tgs2 support
 			details = ": '" + html_encode(testmerge[line]["title"]) + "' by " + html_encode(testmerge[line]["user"]["login"])
